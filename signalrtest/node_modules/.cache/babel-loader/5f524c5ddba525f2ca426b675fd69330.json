{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/chrispearson/Projects/SignalRChatTest/signalrtest/src/Chat.jsx\";\nimport React, { Component } from 'react';\nimport { LogLevel, HubConnectionBuilder } from '@aspnet/signalr';\n\nclass Chat extends Component {\n  constructor(props) {\n    super(props);\n\n    this.connection = async () => {\n      return new HubConnectionBuilder().withUrl(\"https://cpsignalrchattest.service.signalr.net/test\").configureLogging(LogLevel.Information).build();\n    };\n\n    this.start = async () => {\n      try {\n        let c = this.connection;\n        await c.start;\n        console.log(\"SignalR Connected.\");\n        debugger;\n        this.setState({\n          hubConnection: c\n        });\n      } catch (err) {\n        console.log(err);\n        setTimeout(this.start, 5000);\n      }\n    };\n\n    this.componentDidMount = () => {\n      const nick = \"chrisA\"; //window.prompt('Your name:', 'John');\n\n      this.start(); // const hubConnection = new HubConnectionBuilder()\n      // .withUrl(\"https://cpsignalrchattest.service.signalr.net/test\")\n      // .configureLogging(LogLevel.Information)\n      // .build();\n      // this.setState({ hubConnection, nick }, () => {\n      //   this.state.hubConnection\n      //     .start()\n      //     .then(() => console.log('Connection started!'))\n      //     .catch(err => console.log('Error while establishing connection :('));\n      //   this.state.hubConnection.on('sendToAll', (nick, receivedMessage) => {\n      //     const text = `${nick}: ${receivedMessage}`;\n      //     const messages = this.state.messages.concat([text]);\n      //     this.setState({ messages });\n      //   });\n      // });\n    };\n\n    this.sendMessage = () => {\n      this.state.hubConnection.invoke('sendToAll', this.state.nick, this.state.message).catch(err => console.error(err));\n      this.setState({\n        message: ''\n      });\n    };\n\n    this.state = {\n      nick: '',\n      message: '',\n      messages: [],\n      hubConnection: null\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: this.state.message,\n        onChange: e => this.setState({\n          message: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.sendMessage,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: this.state.messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            display: 'block'\n          },\n          children: [\" \", message, \" \"]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Chat;","map":{"version":3,"sources":["/Users/chrispearson/Projects/SignalRChatTest/signalrtest/src/Chat.jsx"],"names":["React","Component","LogLevel","HubConnectionBuilder","Chat","constructor","props","connection","withUrl","configureLogging","Information","build","start","c","console","log","setState","hubConnection","err","setTimeout","componentDidMount","nick","sendMessage","state","invoke","message","catch","error","messages","render","e","target","value","map","index","display"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,EAAmBC,oBAAnB,QAA+C,iBAA/C;;AAEA,MAAMC,IAAN,SAAmBH,SAAnB,CAA6B;AAC3BI,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAWnBC,UAXmB,GAWN,YAAY;AACvB,aAAO,IAAIJ,oBAAJ,GACNK,OADM,CACE,oDADF,EAENC,gBAFM,CAEWP,QAAQ,CAACQ,WAFpB,EAGNC,KAHM,EAAP;AAID,KAhBkB;;AAAA,SAkBnBC,KAlBmB,GAkBX,YAAY;AAClB,UAAI;AACF,YAAIC,CAAC,GAAG,KAAKN,UAAb;AACA,cAAMM,CAAC,CAACD,KAAR;AACAE,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACA;AACA,aAAKC,QAAL,CAAc;AACZC,UAAAA,aAAa,EAAEJ;AADH,SAAd;AAGD,OARD,CAQE,OAAOK,GAAP,EAAY;AACVJ,QAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AACAC,QAAAA,UAAU,CAAC,KAAKP,KAAN,EAAa,IAAb,CAAV;AACH;AACF,KA/BkB;;AAAA,SAiCnBQ,iBAjCmB,GAiCC,MAAM;AACxB,YAAMC,IAAI,GAAG,QAAb,CADwB,CACF;;AAEtB,WAAKT,KAAL,GAHwB,CAMxB;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACD,KAxDkB;;AAAA,SA0DnBU,WA1DmB,GA0DL,MAAM;AAClB,WAAKC,KAAL,CAAWN,aAAX,CACGO,MADH,CACU,WADV,EACuB,KAAKD,KAAL,CAAWF,IADlC,EACwC,KAAKE,KAAL,CAAWE,OADnD,EAEGC,KAFH,CAESR,GAAG,IAAIJ,OAAO,CAACa,KAAR,CAAcT,GAAd,CAFhB;AAIE,WAAKF,QAAL,CAAc;AAACS,QAAAA,OAAO,EAAE;AAAV,OAAd;AACH,KAhEkB;;AAGjB,SAAKF,KAAL,GAAa;AACXF,MAAAA,IAAI,EAAE,EADK;AAEXI,MAAAA,OAAO,EAAE,EAFE;AAGXG,MAAAA,QAAQ,EAAE,EAHC;AAIXX,MAAAA,aAAa,EAAE;AAJJ,KAAb;AAMD;;AAyDDY,EAAAA,MAAM,GAAG;AACP,wBACE;AAAA,8BACE;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,KAAK,EAAE,KAAKN,KAAL,CAAWE,OAFpB;AAGE,QAAA,QAAQ,EAAEK,CAAC,IAAI,KAAKd,QAAL,CAAc;AAAES,UAAAA,OAAO,EAAEK,CAAC,CAACC,MAAF,CAASC;AAApB,SAAd;AAHjB;AAAA;AAAA;AAAA;AAAA,cAFF,eAQE;AAAQ,QAAA,OAAO,EAAE,KAAKV,WAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cARF,eAUE;AAAA,kBACG,KAAKC,KAAL,CAAWK,QAAX,CAAoBK,GAApB,CAAwB,CAACR,OAAD,EAAUS,KAAV,kBACvB;AAAM,UAAA,KAAK,EAAE;AAACC,YAAAA,OAAO,EAAE;AAAV,WAAb;AAAA,0BAA+CV,OAA/C;AAAA,WAAsCS,KAAtC;AAAA;AAAA;AAAA;AAAA,gBADD;AADH;AAAA;AAAA;AAAA;AAAA,cAVF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAkBD;;AAtF0B;;AAyF7B,eAAe9B,IAAf","sourcesContent":["import React, { Component } from 'react';\nimport { LogLevel, HubConnectionBuilder } from '@aspnet/signalr';\n\nclass Chat extends Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      nick: '',\n      message: '',\n      messages: [],\n      hubConnection: null,\n    };\n  }\n\n  connection = async () => { \n    return new HubConnectionBuilder()\n    .withUrl(\"https://cpsignalrchattest.service.signalr.net/test\")\n    .configureLogging(LogLevel.Information)\n    .build();\n  }\n\n  start = async () => {\n    try {\n      let c = this.connection;\n      await c.start;\n      console.log(\"SignalR Connected.\");\n      debugger;\n      this.setState({\n        hubConnection: c\n      });\n    } catch (err) {\n        console.log(err);\n        setTimeout(this.start, 5000);\n    }\n  }\n\n  componentDidMount = () => {\n    const nick = \"chrisA\";//window.prompt('Your name:', 'John');\n    \n    this.start();\n\n\n    // const hubConnection = new HubConnectionBuilder()\n    // .withUrl(\"https://cpsignalrchattest.service.signalr.net/test\")\n    // .configureLogging(LogLevel.Information)\n    // .build();\n\n    // this.setState({ hubConnection, nick }, () => {\n    //   this.state.hubConnection\n    //     .start()\n    //     .then(() => console.log('Connection started!'))\n    //     .catch(err => console.log('Error while establishing connection :('));\n\n    //   this.state.hubConnection.on('sendToAll', (nick, receivedMessage) => {\n    //     const text = `${nick}: ${receivedMessage}`;\n    //     const messages = this.state.messages.concat([text]);\n    //     this.setState({ messages });\n    //   });\n    // });\n  }\n\n  sendMessage = () => {\n    this.state.hubConnection\n      .invoke('sendToAll', this.state.nick, this.state.message)\n      .catch(err => console.error(err));\n  \n      this.setState({message: ''});      \n  };\n  \n  render() {\n    return (\n      <div>\n        <br />\n        <input\n          type=\"text\"\n          value={this.state.message}\n          onChange={e => this.setState({ message: e.target.value })}\n        />\n  \n        <button onClick={this.sendMessage}>Send</button>\n  \n        <div>\n          {this.state.messages.map((message, index) => (\n            <span style={{display: 'block'}} key={index}> {message} </span>\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Chat;"]},"metadata":{},"sourceType":"module"}