{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/chrispearson/Projects/SignalRChatTest/signalrtest/src/Chat.jsx\";\nimport React, { Component } from 'react';\nimport { LogLevel, HubConnectionBuilder } from '@aspnet/signalr';\n\nclass Chat extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {\n      const nick = \"chrisA\"; //window.prompt('Your name:', 'John');\n      // this.start();\n\n      const hubConnection = new HubConnectionBuilder().withUrl(\"http://localhost:3000/test\").configureLogging(LogLevel.Trace).build();\n      this.setState({\n        hubConnection,\n        nick\n      }, () => {\n        this.state.hubConnection.start().then(() => console.log('Connection started!')).catch(err => {\n          debugger;\n          console.log(err + 'Error while establishing connection :(');\n        });\n        this.state.hubConnection.on('sendToAll', (nick, receivedMessage) => {\n          const text = `${nick}: ${receivedMessage}`;\n          const messages = this.state.messages.concat([text]);\n          this.setState({\n            messages\n          });\n        });\n      });\n    };\n\n    this.sendMessage = async () => {\n      await this.state.hubConnection.invoke('sendToAll', this.state.nick, this.state.message).catch(err => console.error(err));\n      this.setState({\n        message: ''\n      });\n    };\n\n    this.state = {\n      nick: '',\n      message: '',\n      messages: [],\n      hubConnection: null\n    };\n  } // connection = async () => { \n  //   return new HubConnectionBuilder()\n  //   .withUrl(\"https://cpsignalrchattest.service.signalr.net/test\")\n  //   .configureLogging(LogLevel.Information)\n  //   .build();\n  // }\n  // start = async () => {\n  //   try {\n  //     let c = this.connection;\n  //     await c.start;\n  //     console.log(\"SignalR Connected.\");\n  //     debugger;\n  //     this.setState({\n  //       hubConnection: c\n  //     });\n  //   } catch (err) {\n  //       console.log(err);\n  //       setTimeout(this.start, 5000);\n  //   }\n  // }\n\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: this.state.message,\n        onChange: e => this.setState({\n          message: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.sendMessage,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: this.state.messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            display: 'block'\n          },\n          children: [\" \", message, \" \"]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Chat;","map":{"version":3,"sources":["/Users/chrispearson/Projects/SignalRChatTest/signalrtest/src/Chat.jsx"],"names":["React","Component","LogLevel","HubConnectionBuilder","Chat","constructor","props","componentDidMount","nick","hubConnection","withUrl","configureLogging","Trace","build","setState","state","start","then","console","log","catch","err","on","receivedMessage","text","messages","concat","sendMessage","invoke","message","error","render","e","target","value","map","index","display"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { LogLevel, HubConnectionBuilder } from '@aspnet/signalr';\n\nclass Chat extends Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      nick: '',\n      message: '',\n      messages: [],\n      hubConnection: null,\n    };\n  }\n\n  // connection = async () => { \n  //   return new HubConnectionBuilder()\n  //   .withUrl(\"https://cpsignalrchattest.service.signalr.net/test\")\n  //   .configureLogging(LogLevel.Information)\n  //   .build();\n  // }\n\n  // start = async () => {\n  //   try {\n  //     let c = this.connection;\n  //     await c.start;\n  //     console.log(\"SignalR Connected.\");\n  //     debugger;\n  //     this.setState({\n  //       hubConnection: c\n  //     });\n  //   } catch (err) {\n  //       console.log(err);\n  //       setTimeout(this.start, 5000);\n  //   }\n  // }\n\n  componentDidMount = () => {\n    const nick = \"chrisA\";//window.prompt('Your name:', 'John');\n    \n    // this.start();\n\n\n    const hubConnection = new HubConnectionBuilder()\n    .withUrl(\"http://localhost:3000/test\")\n    .configureLogging(LogLevel.Trace)\n    .build();\n\n    this.setState({ hubConnection, nick }, () => {\n      this.state.hubConnection\n        .start()\n        .then(() => console.log('Connection started!'))\n        .catch(err => {\n          debugger;\n          console.log(err + 'Error while establishing connection :(')\n        });\n\n      this.state.hubConnection.on('sendToAll', (nick, receivedMessage) => {\n        const text = `${nick}: ${receivedMessage}`;\n        const messages = this.state.messages.concat([text]);\n        this.setState({ messages });\n      });\n    });\n  }\n\n  sendMessage = async () => {\n    await this.state.hubConnection\n      .invoke('sendToAll', this.state.nick, this.state.message)\n      .catch(err => console.error(err));\n  \n      this.setState({message: ''});      \n  };\n  \n  render() {\n    return (\n      <div>\n        <br />\n        <input\n          type=\"text\"\n          value={this.state.message}\n          onChange={e => this.setState({ message: e.target.value })}\n        />\n  \n        <button onClick={this.sendMessage}>Send</button>\n  \n        <div>\n          {this.state.messages.map((message, index) => (\n            <span style={{display: 'block'}} key={index}> {message} </span>\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Chat;"]},"metadata":{},"sourceType":"module"}